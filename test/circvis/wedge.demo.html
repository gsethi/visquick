<html>

<head>
    <meta http-equiv="PRAGMA" content="NO-CACHE">
    <title>Wedge Demo</title>
    <!-- Font Awesome - http://fortawesome.github.com/Font-Awesome -->
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">

    <link href="../../assets/css/vq.css" type="text/css" rel="stylesheet" />

    <script type="text/javascript" src="../../lib/protovis/protovis.js"></script>
    <script type="text/javascript" src="../../lib/d3/d3.v2.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../lib/underscore/underscore.js"></script>
    <script type="text/javascript" src="../../vq.js"></script>
    <script type="text/javascript" src="../../vq.wedge.js"></script>
    <script type="text/javascript" src="../../data/circvis_data.json"></script>


    <script type="text/javascript" src="js/circvis_configure.js"></script>

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!--[if IE 7]>
    <link rel="stylesheet" href="../../assets/css/font-awesome-ie7.css">
    <![endif]-->
</head>
<body>

<button id="1_random_edge">Add 1 Random Edges</button><br />
<button id="50_random_edge">Add 50 Random Edges</button><br />
<button id="50_random_nodes">Add 50 Random Nodes</button><br />

Drag the circvis (on the rings) to rotate the entire display.<br/>

<div id="wedge" style="font: 10px sans-serif;margin:10px;"></div>

<script type="text/javascript">
    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXTZ';
    function generateNode() {
        var source = ['GEXP','METH','CNVR','MIRN','GNAB'][(Math.random()*5) >>> 0];
        var label = _.chain(_.range(0,4)).reduce(function(a,b) { return a+chars[Math.random()*chars.length >>> 0];},'').value();
        var in1 = Math.random()*(chrom_keys.length-1) >>> 0;
        var chr1 = chrom_keys[in1];
        var mut1 = Math.random()*6 >>> 0;
        var cnv1 = Math.random()*500 >>> 0;
        var start1 = Math.random() * (chrom_attr[chr1].length - 50000) >>> 0;
        return {label:'C:'+ source +':'+label+':'+chr1+':'+start1+':'+start1+50000+'::',chr:chr1,start:start1,end:start1
                + 50000,source:source,clin_assoc:cnv1, mutation_count:mut1};
    }

    function generateAssociation() {
        var val1 = (Math.random()*0.3).toFixed(4);
        return {node1:generateNode(), node2:generateNode(), assoc_value1:val1};
    }

    $('#50_random_edge').on('click',function() {
                var edges = _(_.range(0,50)).map(generateAssociation);
                circle.addEdges(edges);
            }
    );
    $('#1_random_edge').on('click',function() {
                circle.addEdges(generateAssociation());
            }
    );
    $('#50_random_nodes').on('click',function() {
                var nodes = _(_.range(0,50)).map(generateNode);
                circle.addNodes(nodes);
            }
    );


    var circle;
    circle = circvis.plot($('#wedge').get(0));

</script>

</body>
</html>
